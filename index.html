<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESPP Calculator</title>
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="calculator">
      <!-- Language Toggle -->
      <div class="language-toggle">
        <label class="lang-option">
          <input type="radio" name="language" value="en" checked onchange="changeLanguage('en')" />
          <span class="lang-label">EN</span>
        </label>
        <label class="lang-option">
          <input type="radio" name="language" value="he" onchange="changeLanguage('he')" />
          <span class="lang-label">HE</span>
        </label>
      </div>

      <h1 data-i18n="title">ESPP Calculator</h1>

      <div class="calculator-content">
        <div class="inputs-section">
          <div class="input-group">
            <div class="label-wrapper">
              <label for="offeringPeriod" data-i18n="selectPeriod">Select Offering Period</label>
              <span class="tooltip-icon"
                >i
                <span class="tooltip-text" data-i18n="periodTooltip"
                  >Choose your ESPP offering period. Each period is 6 months
                  long.</span
                >
              </span>
            </div>
            <div class="radio-group">
              <label class="radio-option">
                <input
                  type="radio"
                  name="offeringPeriod"
                  value="oct-mar"
                  checked
                />
                <span class="radio-label" data-i18n="periodOctMar">October → March</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="offeringPeriod" value="apr-sep" />
                <span class="radio-label" data-i18n="periodAprSep">April → September</span>
              </label>
            </div>
          </div>

          <div class="price-inputs">
            <div class="input-group">
              <div class="label-wrapper">
                <label for="priceA"
                  ><span id="startDateLabel">October 1</span> Stock Price</label
                >
                <span class="tooltip-icon"
                  >i
                  <span class="tooltip-text"
                    >Enter the stock price at the beginning of the offering
                    period.</span
                  >
                </span>
              </div>
              <input
                type="number"
                id="priceA"
                placeholder="USD $"
                step="0.01"
                min="0"
              />
            </div>

            <div class="input-group">
              <div class="label-wrapper">
                <label for="priceB"
                  ><span id="endDateLabel">March 31</span> Stock Price</label
                >
                <span class="tooltip-icon"
                  >i
                  <span class="tooltip-text"
                    >Enter the stock price at the end of the offering
                    period.</span
                  >
                </span>
              </div>
              <input
                type="number"
                id="priceB"
                placeholder="USD $"
                step="0.01"
                min="0"
              />
            </div>
          </div>

          <div class="input-group">
            <div class="label-wrapper">
              <label for="priceToday">Today's Stock Price (Optional)</label>
              <span class="tooltip-icon"
                >i
                <span class="tooltip-text"
                  >Enter today's stock price to see what your shares would be
                  worth today if you haven't sold them yet after the purchase
                  date.</span
                >
              </span>
            </div>
            <input
              type="number"
              id="priceToday"
              placeholder="USD $ - Leave empty if not applicable"
              step="0.01"
              min="0"
            />
          </div>

          <div class="input-group">
            <div class="label-wrapper">
              <label class="toggle-label">
                <span class="toggle-switch">
                  <input type="checkbox" id="useActualShares" />
                  <span class="toggle-slider"></span>
                </span>
                I already received the shares
              </label>
              <span class="tooltip-icon"
                >i
                <span class="tooltip-text"
                  >Enable this toggle if you already received your shares and
                  know the exact number. When enabled, you'll enter the actual
                  shares received, and the calculator will skip the salary and
                  contribution fields. When disabled, the calculator will
                  estimate shares based on your salary and contribution
                  percentage.</span
                >
              </span>
            </div>
            <div
              id="actualSharesContainer"
              style="display: none; margin-top: 12px"
            >
              <div class="label-wrapper">
                <label for="actualShares">Actual Shares Received</label>
              </div>
              <input
                type="number"
                id="actualShares"
                placeholder="Enter actual shares received"
                step="0.0001"
                min="0"
              />
            </div>
          </div>

          <div class="input-group" id="contributionGroup">
            <div class="label-wrapper">
              <label for="contribution">ESPP Contribution %</label>
              <span class="tooltip-icon"
                >i
                <span class="tooltip-text"
                  >Select what percentage of your salary (1-20%) you want to
                  contribute to ESPP each month.</span
                >
              </span>
            </div>
            <div class="custom-select" id="customSelect">
              <div class="custom-select-trigger placeholder">
                <span id="selectedValue">Select percentage</span>
                <div class="custom-select-arrow"></div>
              </div>
              <div class="custom-select-dropdown">
                <div class="custom-select-option" data-value="">
                  Select percentage
                </div>
                <div class="custom-select-option" data-value="1">1%</div>
                <div class="custom-select-option" data-value="2">2%</div>
                <div class="custom-select-option" data-value="3">3%</div>
                <div class="custom-select-option" data-value="4">4%</div>
                <div class="custom-select-option" data-value="5">5%</div>
                <div class="custom-select-option" data-value="6">6%</div>
                <div class="custom-select-option" data-value="7">7%</div>
                <div class="custom-select-option" data-value="8">8%</div>
                <div class="custom-select-option" data-value="9">9%</div>
                <div class="custom-select-option" data-value="10">10%</div>
                <div class="custom-select-option" data-value="11">11%</div>
                <div class="custom-select-option" data-value="12">12%</div>
                <div class="custom-select-option" data-value="13">13%</div>
                <div class="custom-select-option" data-value="14">14%</div>
                <div class="custom-select-option" data-value="15">15%</div>
                <div class="custom-select-option" data-value="16">16%</div>
                <div class="custom-select-option" data-value="17">17%</div>
                <div class="custom-select-option" data-value="18">18%</div>
                <div class="custom-select-option" data-value="19">19%</div>
                <div class="custom-select-option" data-value="20">20%</div>
              </div>
            </div>
            <input type="hidden" id="contribution" value="" />
          </div>

          <div class="input-group" id="salaryGroup">
            <div class="label-wrapper">
              <label for="salary">Monthly Base Salary (NIS)</label>
              <span class="tooltip-icon"
                >i
                <span class="tooltip-text"
                  >Enter your gross monthly salary in NIS before taxes. This is
                  used to calculate your ESPP contribution amount.</span
                >
              </span>
            </div>
            <input
              type="number"
              id="salary"
              placeholder="NIS ₪"
              step="1"
              min="0"
            />
          </div>

          <div class="input-group" id="exchangeRateGroup">
            <div class="label-wrapper">
              <label for="exchangeRate">NIS to USD Exchange Rate</label>
              <span class="tooltip-icon"
                >i
                <span class="tooltip-text"
                  >Enter the current exchange rate from NIS to USD (e.g., 3.60
                  means 1 USD = 3.60 NIS). Check current rates online.</span
                >
              </span>
            </div>
            <input
              type="number"
              id="exchangeRate"
              placeholder="e.g., 3.60"
              step="0.01"
              min="0"
            />
          </div>

          <button onclick="calculate()">Calculate</button>
        </div>

        <div class="results-section">
          <div class="results" id="results">
            <div class="results-header">Calculation Results</div>

            <div class="result-item">
              <span class="result-label">Lower Stock Price</span>
              <span class="result-value" id="lowerPrice">-</span>
            </div>

            <div class="result-item">
              <span class="result-label">Purchase Price - 15% Discount</span>
              <span class="result-value" id="purchasePrice">-</span>
            </div>

            <div class="result-item" id="monthlyContributionRow">
              <span class="result-label">Monthly Contribution (NIS)</span>
              <span class="result-value" id="monthlyContribution">-</span>
            </div>

            <div class="result-item" id="totalContributionNISRow">
              <span class="result-label"
                >Total ESPP Contributions (6 months) - NIS</span
              >
              <span class="result-value" id="totalContributionNIS">-</span>
            </div>

            <div class="result-item">
              <span class="result-label"
                >Total ESPP Contributions (6 months) - USD</span
              >
              <span class="result-value" id="totalContribution">-</span>
            </div>

            <div class="highlight">
              <div class="result-item">
                <span class="result-label">Number of Shares You'll Get</span>
                <span class="result-value" id="shares">-</span>
              </div>

              <div class="result-item">
                <span class="result-label"
                  >Their Value at <span id="endDateResult">March 31</span></span
                >
                <span class="result-value" id="marketValue">-</span>
              </div>

              <div class="result-item" id="todayValueRow" style="display: none">
                <span class="result-label">Their Value Today</span>
                <span class="result-value" id="marketValueToday">-</span>
              </div>

              <div class="result-item">
                <span class="result-label"
                  >Your Instant Profit at
                  <span id="endDateProfit">March 31</span> (Value -
                  Contribution)</span
                >
                <span class="result-value" id="profit">-</span>
              </div>

              <div
                class="result-item"
                id="todayProfitRow"
                style="display: none"
              >
                <span class="result-label"
                  >Your Total Profit Today (Value Today - Contribution)</span
                >
                <span class="result-value" id="profitToday">-</span>
              </div>
            </div>

            <div
              class="collapsible-header"
              onclick="toggleFeesInfo()"
              style="border-left-color: #3182ce; background: #ebf8ff"
            >
              <strong style="color: #2c5282"
                >💰Important Information About Fees</strong
              >
              <div
                class="collapsible-arrow"
                id="feesArrow"
                style="border-top-color: #2c5282"
              ></div>
            </div>
            <div
              class="collapsible-content"
              id="feesContent"
              style="border-left-color: #3182ce; background: #ebf8ff"
            >
              <div class="collapsible-content-inner" style="color: #2c5282">
                <strong style="color: #2c5282"
                  >Purchase Fees (Covered by MSI):</strong
                >
                When you buy shares through the ESPP, E*TRADE charges a
                transaction fee. The good news: Motorola Solutions pays these
                purchase fees for you!<br /><br />
                <strong style="color: #2c5282"
                  >Selling Fees (Your Responsibility):</strong
                >
                When you sell your ESPP shares, E*TRADE will charge a selling
                fee. You are responsible for paying these fees. Make sure to
                factor this into your calculations when planning to sell.
              </div>
            </div>

            <div class="collapsible-header" onclick="toggleTaxInfo()">
              <strong>💡Understanding Your ESPP and Taxes</strong>
              <div class="collapsible-arrow" id="taxArrow"></div>
            </div>
            <div class="collapsible-content" id="taxContent">
              <div class="collapsible-content-inner">
                <strong>Important: This is "after-tax" money</strong>
                Your ESPP contribution is deducted from your salary after income
                tax has already been calculated and paid. For example, if your
                base salary is 25,000 NIS and you contribute 20%, you're
                contributing 5,000 NIS that you've already paid income tax on.
                This means the ESPP contribution comes from "after-tax" money.

                <strong
                  >When you buy the shares (<span id="endDateTax">March 31</span
                  >):</strong
                >
                No additional tax is owed at that moment. The shares just appear
                in your E*TRADE account.

                <strong>When you sell the shares (in the future):</strong>
                You'll only pay tax on the PROFIT you made (the difference
                between what you paid and what you sold them for). You won't be
                taxed again on the original contribution (the 5,000 NIS in our
                example) because you already paid tax on it when it was part of
                your salary.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
